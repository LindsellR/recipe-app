<!-- recipes/templates/recipes/base.html -->
<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Recipe App{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'recipes/css/styles.css' %}">
</head>

<body>

    {# Display Django messages (success, error, info, etc.) with role="alert" for screen readers #}
    {% if messages %}
    <div class="messages" role="alert" aria-live="polite">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Header: only show if not on the welcome page -->
    {% if request.resolver_match.url_name != "welcome" %}
    <header class="header-banner" role="banner">

        <!-- Left: Logo + Title -->
        <div class="header-left">
            <a href="{% url 'recipes:recipe_list' %}" aria-label="Home">
                {% load static %}
                {% load static %}
                <img src="{% static 'site_images/recipe_app_icon.jpg' %}" alt="Site Icon" class="app-icon">

            </a>
            <span class="app-title">Recipe App</span>

            <!-- Hamburger for mobile -->
            <button class="hamburger" aria-label="Toggle menu">&#9776;</button>
        </div>

        <!-- Center: Search -->
        <form method="get" action="{% url 'recipes:search_recipes' %}" class="header-search" role="search"
            aria-label="Quick recipe search">
            <label for="header-search-input" class="sr-only"></label>
            <input type="text" id="header-search-input" name="q" placeholder="Search by recipe title or ingredient"
                aria-label="Recipe search query">

            <label for="header-meal-type" class="sr-only"></label>
            <select name="meal_type" id="header-meal-type" aria-label="Filter recipes by meal type">
                <option value="all">Any meal</option>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
                <option value="snack">Snack</option>
                <option value="drink">Drink</option>
                <option value="dessert">Dessert</option>
            </select>
            <button type="submit" aria-label="Search recipes">Search</button>
        </form>

        <!-- Right: All buttons -->
        <div class="header-right">
            <div class="header-links">
                <a href="{% url 'recipes:recipe_list' %}" class="btn btn-home">Home</a>
                <a href="{% url 'about' %}" class="btn btn-about">About Me</a>
                {% if user.is_authenticated %}
                <a href="{% url 'users:profile' %}" class="btn btn-profile">Profile</a>
                <form action="{% url 'logout' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-logout">Logout</button>
                </form>
                {% else %}
                <a href="{% url 'login' %}" class="btn btn-login">Login</a>
                {% endif %}
            </div>
        </div>
    </header>

    {% endif %}

    <!-- Main content area -->
    <main role="main">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer role="contentinfo" style="text-align:center; padding:20px; background:#d4edda; margin-top:20px;">
        <p>Â© 2025 Recipe App</p>
    </footer>
    <script>
        const hamburger = document.querySelector('.hamburger');
        const headerLinks = document.querySelector('.header-right');

        hamburger.addEventListener('click', () => {
            headerLinks.classList.toggle('active');
        });
    </script>
</body>

</html>