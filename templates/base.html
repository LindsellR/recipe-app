<!-- recipes/templates/recipes/base.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Recipe App{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'recipes/css/styles.css' %}">
</head>

<body>

    {# Display Django messages (success, error, info, etc.) with role="alert" for screen readers #}
    {% if messages %}
    <div class="messages" role="alert" aria-live="polite">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Header: only show if not on the welcome page -->
    {% if request.resolver_match.url_name != "welcome" %}
    <header class="header-banner" role="banner">

        <!-- Left: Logo + App Title + Home button + About Me button -->
        <div class="header-left">
            <a href="{% url 'recipes:recipe_list' %}" aria-label="Home">
                <img src="/media/recipe_app_icon.jpg" alt="Recipe App Icon" class="app-icon">
            </a>
            <span class="app-title">Recipe App</span>
            <a href="{% url 'recipes:recipe_list' %}" class="btn btn-home" aria-label="Go to Home Page">Home</a>
            <a href="{% url 'about' %}" class="btn btn-about" aria-label="About the developer">About Me</a>
        </div>

        <!-- Center: Header search form -->
        <form method="get" action="{% url 'recipes:search_recipes' %}" class="header-search" role="search"
            aria-label="Quick recipe search">
            <label for="header-search-input" class="sr-only">Search recipes by title or ingredient</label>
            <input type="text" id="header-search-input" name="q" placeholder="Search by recipe title or ingredient"
                aria-label="Recipe search query">

            <label for="header-meal-type" class="sr-only">Filter by meal type</label>
            <select name="meal_type" id="header-meal-type" aria-label="Filter recipes by meal type">
                <option value="all">Any meal</option>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
                <option value="snack">Snack</option>
                <option value="drink">Drink</option>
                <option value="dessert">Dessert</option>
            </select>
            <button type="submit" aria-label="Search recipes">Search</button>
        </form>

        <!-- Right: User actions -->
        <div class="header-right">
            {% if user.is_authenticated %}
            <div class="user-menu" aria-label="User menu">
                <a href="{% url 'users:profile' %}" class="btn btn-profile" aria-label="Go to your profile">User Profile</a>
                <form action="{% url 'logout' %}" method="post" style="display:inline;" aria-label="Logout form">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-logout" aria-label="Logout from Recipe App">Logout</button>
                </form>
            </div>
            {% else %}
            <a href="{% url 'login' %}" class="btn btn-login" aria-label="Login to Recipe App">Login</a>
            {% endif %}
        </div>
    </header>
    {% endif %}

    <!-- Main content area -->
    <main role="main">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer role="contentinfo" style="text-align:center; padding:20px; background:#d4edda; margin-top:20px;">
        <p>Â© 2025 Recipe App</p>
    </footer>

</body>

</html>